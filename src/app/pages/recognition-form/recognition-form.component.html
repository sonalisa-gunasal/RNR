<div class="main">
    <mat-card>
        <mat-card-header>
            <div class="w-100 d-flex align-items-center justify-content-between">
                <div class="brand">
                    <div class="logo"><span>‚úì</span></div>
                    <h1>Recognize a Teammate</h1>
                </div>

                <span class="badge">RNR ‚Ä¢ Form</span>
            </div>
        </mat-card-header>

        <hr />

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <!-- Error toast replaced by MatSnackBar -->
            <div class="grid">
                <div class="field">
                    <mat-form-field class="example-full-width">
                        <input type="text" placeholder="Choose Team Mate" aria-label="Number" matInput
                            [matAutocomplete]="auto" formControlName="recognizedTo" required>
                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                            @for (item of users; track item) {
                            <mat-option [value]="item.userId">{{item.name}}</mat-option>
                            }
                        </mat-autocomplete>
                    </mat-form-field>
                    <div class="help">Start typing (autocomplete)</div>
                    <mat-error *ngIf="form.get('recognizedTo')?.invalid && (form.get('recognizedTo')?.touched || submitted)">Team Mate is required</mat-error>
                </div>

                <div class="field">
                    <label>Category</label>
                    <div class="chips" role="radiogroup" aria-label="Category">
                        <button type="button" class="chip" role="radio"
                            [class.selected]="form.value.category==='Bug Fix'"
                            [attr.aria-checked]="form.value.category==='Bug Fix'" (click)="setCategory('Bug Fix')">üêû Bug Fix</button>
                        <button type="button" class="chip" role="radio"
                            [class.selected]="form.value.category==='Help'"
                            [attr.aria-checked]="form.value.category==='Help'" (click)="setCategory('Help')">ü§ù Help</button>
                        <button type="button" class="chip" role="radio"
                            [class.selected]="form.value.category==='Innovation'"
                            [attr.aria-checked]="form.value.category==='Innovation'" (click)="setCategory('Innovation')">üí° Innovation</button>
                        <button type="button" class="chip" role="radio"
                            [class.selected]="form.value.category==='Customer Appreciation'"
                            [attr.aria-checked]="form.value.category==='Customer Appreciation'" (click)="setCategory('Customer Appreciation')">üí¨ Customer Appreciation</button>
                    </div>
                    <div class="help">Pick exactly one</div>
                        <mat-error *ngIf="form.get('category')?.invalid && (form.get('category')?.touched || submitted)">Category is required</mat-error>
                </div>
            </div>


            <div class="field">
                <label>Comments</label>
                <textarea rows="5" maxlength="500" formControlName="comments"
                    placeholder="Describe the contribution‚Ä¶" required></textarea>
                <div class="help">{{charCount()}}/500 characters</div>
                <mat-error *ngIf="form.get('comments')?.invalid && (form.get('comments')?.touched || submitted)">Comments are required</mat-error>
            </div>


            <div class="actions">
                <!-- <button type="submit" class="btn primary" [disabled]="submitting || form.invalid">
                <ng-container *ngIf="!submitting; else loading">Send Recognition</ng-container>
                <ng-template #loading>Submitting‚Ä¶</ng-template>
            </button> -->

                <button mat-raised-button class="btn-secondary" type="button" (click)="form.reset()">
                    <mat-icon>undo</mat-icon>
                    Reset
                </button>

                <button mat-raised-button color="primary" type="submit" [disabled]="submitting">
                    <mat-icon>check</mat-icon>
                    Submit
                </button>
            </div>
        </form>
    </mat-card>
</div>